<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="https://cdn.staticfile.org/minireset.css/0.0.2/minireset.css" />
	<script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>
	<style>
		.div1{width: 400px;height: 400px;}
		.div1>img{width: 100%;height: 100%;}
		
		.div2{width: 400px;height: 400px;background-image: url(1.jpg);background-size: 1600px 1600px;position: absolute;top: 0;left: 400px;display: none;background-repeat: no-repeat;}


		.div3{width: 100px;height: 100px;background: lightgreen;opacity: .5;position: absolute;top: 0;left: 0;display: none;}

		.div4{width: 400px;height: 100px;display: flex;justify-content: space-around;margin-top: 5px}
		.div4>img{display: block;float: left;width: 95px;height: 100px;}	
		
	</style>
</head>
<body>
	
	<div class="div1"><img src="1.jpg" ></div>
	<div class="div4">
		<img src="1.jpg" >
		<img src="2.jpg" >
		<img src="3.jpg" >
		<img src="5.jpg" >
	</div>
	<div class="div2"></div>
	<div class="div3"></div>
	
	<script>
	

		$('.div4>img').on('click',function(){
			
			$('.div1>img').attr('src',$(this).attr('src'))
			$('.div2').css('background-image','url(' +$(this).attr('src') +')')
		})


		$('.div1').on('mouseover',function(e){
			
			$('.div2').css('display','block')
			$('.div3').css('display','block')
			// console.log(e.offsetX);

			$('.div3').css({top:e.offsetY-50 + 'px',left:e.offsetX-50 + 'px'})
		})

		$('.div3').on({mouseover:function(){	
				$('.div2').css('display','block')
				$('.div3').css('display','block')

			},mousemove:function(e){
				var x = e.offsetX + this.offsetLeft - 50;
				var y = e.offsetY + this.offsetTop - 50;

				if (x <= 0) {
					x = 0;
				}
				if (x >= 300) {
					x = 300;
				}

				if (y <= 0) {
					y = 0;
				}
				if (y >= 300) {
					y = 300;
				}

				$('.div3').css({top:y + 'px',left:x + 'px'})
				$('.div2').css({backgroundPositionX: -x*4 + 'px','background-position-y': -y*4 + 'px'})
			},mouseout:function(){
				$('.div2').css('display','none')
				$('.div3').css('display','none')
			}			
		})

	</script>

</body>
</html>